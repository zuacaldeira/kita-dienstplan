<div class="staff-dialog">
  <h2 mat-dialog-title>{{ getTitle() }}</h2>

  <mat-dialog-content>
    <form [formGroup]="staffForm" class="staff-form">
      <!-- First Name -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Vorname</mat-label>
        <input matInput formControlName="firstName" required>
        <mat-icon matPrefix>person</mat-icon>
        <mat-error *ngIf="hasError('firstName', 'required')">
          {{ getErrorMessage('firstName') }}
        </mat-error>
        <mat-error *ngIf="hasError('firstName', 'minlength')">
          {{ getErrorMessage('firstName') }}
        </mat-error>
      </mat-form-field>

      <!-- Last Name -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nachname</mat-label>
        <input matInput formControlName="lastName" required>
        <mat-icon matPrefix>person</mat-icon>
        <mat-error *ngIf="hasError('lastName', 'required')">
          {{ getErrorMessage('lastName') }}
        </mat-error>
        <mat-error *ngIf="hasError('lastName', 'minlength')">
          {{ getErrorMessage('lastName') }}
        </mat-error>
      </mat-form-field>

      <!-- Email -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>E-Mail</mat-label>
        <input matInput formControlName="email" type="email" required>
        <mat-icon matPrefix>email</mat-icon>
        <mat-error *ngIf="hasError('email', 'required')">
          {{ getErrorMessage('email') }}
        </mat-error>
        <mat-error *ngIf="hasError('email', 'email')">
          {{ getErrorMessage('email') }}
        </mat-error>
      </mat-form-field>

      <!-- Phone -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Telefon (optional)</mat-label>
        <input matInput formControlName="phone">
        <mat-icon matPrefix>phone</mat-icon>
        <mat-error *ngIf="hasError('phone', 'pattern')">
          {{ getErrorMessage('phone') }}
        </mat-error>
      </mat-form-field>

      <!-- Role -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Rolle</mat-label>
        <mat-select formControlName="role" required>
          <mat-option *ngFor="let role of roles" [value]="role.value">
            {{ role.label }}
          </mat-option>
        </mat-select>
        <mat-icon matPrefix>work</mat-icon>
        <mat-error *ngIf="hasError('role', 'required')">
          {{ getErrorMessage('role') }}
        </mat-error>
      </mat-form-field>

      <!-- Employment Type -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Besch√§ftigungsart</mat-label>
        <mat-select formControlName="employmentType" required>
          <mat-option *ngFor="let type of employmentTypes" [value]="type.value">
            {{ type.label }}
          </mat-option>
        </mat-select>
        <mat-icon matPrefix>schedule</mat-icon>
        <mat-error *ngIf="hasError('employmentType', 'required')">
          {{ getErrorMessage('employmentType') }}
        </mat-error>
      </mat-form-field>

      <!-- Weekly Hours -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Wochenstunden</mat-label>
        <input matInput formControlName="weeklyHours" type="number" min="1" max="60" required>
        <mat-icon matPrefix>access_time</mat-icon>
        <mat-hint>Anzahl der Stunden pro Woche (1-60)</mat-hint>
        <mat-error *ngIf="hasError('weeklyHours', 'required')">
          {{ getErrorMessage('weeklyHours') }}
        </mat-error>
        <mat-error *ngIf="hasError('weeklyHours', 'min')">
          {{ getErrorMessage('weeklyHours') }}
        </mat-error>
        <mat-error *ngIf="hasError('weeklyHours', 'max')">
          {{ getErrorMessage('weeklyHours') }}
        </mat-error>
      </mat-form-field>

      <!-- Active Checkbox -->
      <div class="checkbox-container">
        <mat-checkbox formControlName="isActive">
          Aktiv
        </mat-checkbox>
      </div>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">
      Abbrechen
    </button>
    <button mat-raised-button color="primary"
            [disabled]="!staffForm.valid"
            (click)="onSubmit()">
      <mat-icon>save</mat-icon>
      Speichern
    </button>
  </mat-dialog-actions>
</div>
